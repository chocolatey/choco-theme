/*!
  * choco-theme v1.4.1 (https://github.com/chocolatey/choco-theme#readme)
  * Copyright 2020-2024 Chocolatey Software
  * Licensed under MIT (https://github.com/chocolatey/choco-theme/blob/main/LICENSE)
*/
(()=>{var z=Object.create;var P=Object.defineProperty;var B=Object.getOwnPropertyDescriptor;var V=Object.getOwnPropertyNames;var K=Object.getPrototypeOf,Q=Object.prototype.hasOwnProperty;var X=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var Y=(e,t,n,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of V(t))!Q.call(e,o)&&o!==n&&P(e,o,{get:()=>t[o],enumerable:!(r=B(t,o))||r.enumerable});return e};var Z=(e,t,n)=>(n=e!=null?z(K(e)):{},Y(t||!e||!e.__esModule?P(n,"default",{value:e,enumerable:!0}):n,e));var N=(e,t,n)=>new Promise((r,o)=>{var w=i=>{try{d(n.next(i))}catch(l){o(l)}},b=i=>{try{d(n.throw(i))}catch(l){o(l)}},d=i=>i.done?r(i.value):Promise.resolve(i.value).then(w,b);d((n=n.apply(e,t)).next())});var I=X(F=>{(()=>{let e=document.querySelector("#diffs");if(e){let t=document.querySelector("#diffContent"),n=document.querySelector("#diffSelector"),r=document.querySelector("#anyPackageRole").value.toLowerCase()==="true",o=l=>N(null,null,function*(){try{return yield(yield fetch(l)).json()}catch(s){console.error(s)}}),w=l=>(t.innerHTML="",o(`${window.location.protocol}//${window.location.host}/json/JsonApi?invoke&action=GetDiffFileUrls&folderName=${l}`).then(s=>{s.forEach(m=>{let f=m.replaceAll("\\","/").replace(".patch","").trim();f=f.split("/").slice(3),f=f.join("\\");let a=/[^\\]*$/.exec(f)[0],$=`diff-path-${a.replaceAll(".","-")}`,S="language-diff";a.includes(".ps1")||a.includes(".psm1")?S="language-diff-powershell":a.includes(".xml")||a.includes(".config")||a.includes(".nuspec")?S="language-diff-xml":a.includes(".json")?S="language-diff-json":a.includes(".js")&&(S="language-diff-js");let x="",v="",k="false",E="Show";r&&(v="show",k="true",E="Hide"),x=`<div class="mb-1" data-file-path="${m}">
                        <div class="p-2 border border-start border-end text-bg-body-secondary d-flex align-items-center">
                            <button class="btn btn-sm btn-secondary btn-show-hide me-2" type="button" data-bs-toggle="collapse" data-bs-target=".${$}" aria-expanded="${k}" aria-controls="${$}">${E}</button>
                            <span>${f}</span>
                        </div>
                        <div class="collapse ${v} ${$}">
                            <pre class="mt-0 border-top-0 ps-0 pe-0"><code class="${S} diff-highlight"></code></pre>
                        </div>
                    </div>`,t.insertAdjacentHTML("beforeend",x);let q=T=>{o(`${window.location.protocol}//${window.location.host}/json/JsonApi?invoke&action=GetDiffContent&key=${T}`).then(W=>{let M=document.querySelectorAll("[data-file-path]"),j=!1;j||M.forEach(C=>{if(C.getAttribute("data-file-path")==T){let p=C.querySelector("pre"),L=C.querySelector("code"),D={nbsp:" ",cent:"\xA2",pound:"\xA3",yen:"\xA5",euro:"\u20AC",copy:"\xA9",reg:"\xAE",lt:"<",gt:">",quot:'"',amp:"&",apos:"'"},U=H=>H.replace(/\&([^;]+);/g,(h,g)=>{let c;return g in D?D[g]:(c=g.match(/^#x([\da-fA-F]+)$/))?String.fromCharCode(parseInt(c[1],16)):(c=g.match(/^#(\d+)$/))?String.fromCharCode(~~c[1]):h});L.insertAdjacentText("afterbegin",U(W));let G=()=>{if((h=>h.scrollWidth>h.offsetWidth)(p)){let h=window.getComputedStyle(p),g=parseInt(h.getPropertyValue("padding-left")),c=p.scrollWidth-g,J=p.querySelectorAll(".token.inserted-sign.inserted"),O=p.querySelectorAll(".token.deleted-sign.deleted"),R=p.querySelectorAll(".token.coord");for(let y of J)y.style.width=`${c}px`;for(let y of O)y.style.width=`${c}px`;for(let y of R)y.style.width=`${c}px`}};Prism.highlightElement(L,!1,G),j=!0}})})},u=t.querySelector("[data-file-path]:last-child .btn-show-hide"),A=!1;u.addEventListener("click",()=>{u.textContent.includes("Show")?u.textContent=u.textContent.replace("Show","Hide"):u.textContent=u.textContent.replace("Hide","Show"),!r&&!A&&(q(m),A=!0)}),r&&q(m)})}).catch(s=>{console.error(s.message)})),b=()=>{n.addEventListener("change",l=>{let s=l.target.value;s!=="default"&&w(s)})},d=e.classList.contains("show")||window.location.hash==`#${e.id}`,i=!1;d&&n.nodeName=="INPUT"?w(n.value):d&&n.nodeName=="SELECT"?b():e.addEventListener("show.bs.collapse",()=>{i||(n.nodeName==="INPUT"?w(n.value):b()),i=!0})}})()});var ne=Z(I());})();
