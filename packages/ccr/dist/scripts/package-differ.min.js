(()=>{(()=>{var N=Object.getOwnPropertyNames,H=(g,e)=>function(){return e||(0,g[N(g)[0]])((e={exports:{}}).exports,e),e.exports},F=(g,e,n)=>new Promise((i,r)=>{var S=t=>{try{a(n.next(t))}catch(c){r(c)}},w=t=>{try{a(n.throw(t))}catch(c){r(c)}},a=t=>t.done?i(t.value):Promise.resolve(t.value).then(S,w);a((n=n.apply(g,e)).next())}),I=H({"src/scripts/packages/ccr/package-differ.js"(g){(()=>{let e=document.querySelector("#diffs");if(e){let n=document.querySelector("#diffContent"),i=document.querySelector("#diffSelector"),r=document.querySelector("#anyPackageRole").value.toLowerCase()==="true",S=m=>F(null,null,function*(){try{return yield(yield fetch(m)).json()}catch(o){console.error(o)}}),w=m=>(n.innerHTML="",S(`${window.location.protocol}//${window.location.host}/json/JsonApi?invoke&action=GetDiffFileUrls&folderName=${m}`).then(o=>{o.forEach(y=>{let d=y.replaceAll("\\","/").replace(".patch","").trim();d=d.split("/").slice(3),d=d.join("\\");let s=/[^\\]*$/.exec(d)[0],b=`diff-path-${s.replaceAll(".","-")}`,x="language-diff";s.includes(".ps1")||s.includes(".psm1")?x="language-diff-powershell":s.includes(".xml")||s.includes(".config")||s.includes(".nuspec")?x="language-diff-xml":s.includes(".json")?x="language-diff-json":s.includes(".js")&&(x="language-diff-js");let C="",A="",k="false",q="Show";r&&(A="show",k="true",q="Hide"),C=`<div class="mb-1" data-file-path="${y}">
                        <div class="p-2 border border-start border-end text-bg-body-secondary d-flex align-items-center">
                            <button class="btn btn-sm btn-secondary btn-show-hide me-2" type="button" data-bs-toggle="collapse" data-bs-target=".${b}" aria-expanded="${k}" aria-controls="${b}">${q}</button>
                            <span>${d}</span>
                        </div>
                        <div class="collapse ${A} ${b}">
                            <pre class="mt-0 border-top-0 ps-0 pe-0"><code class="${x} diff-highlight"></code></pre>
                        </div>
                    </div>`,n.insertAdjacentHTML("beforeend",C);let E=P=>{S(`${window.location.protocol}//${window.location.host}/json/JsonApi?invoke&action=GetDiffContent&key=${P}`).then(O=>{let W=document.querySelectorAll("[data-file-path]"),T=!1;T||W.forEach($=>{if($.getAttribute("data-file-path")==P){let u=$.querySelector("pre"),L=$.querySelector("code"),_={nbsp:" ",cent:"\xA2",pound:"\xA3",yen:"\xA5",euro:"\u20AC",copy:"\xA9",reg:"\xAE",lt:"<",gt:">",quot:'"',amp:"&",apos:"'"},J=D=>D.replace(/\&([^;]+);/g,(p,h)=>{let l;return h in _?_[h]:(l=h.match(/^#x([\da-fA-F]+)$/))?String.fromCharCode(parseInt(l[1],16)):(l=h.match(/^#(\d+)$/))?String.fromCharCode(~~l[1]):p});L.insertAdjacentText("afterbegin",J(O));let M=()=>{if((p=>p.scrollWidth>p.offsetWidth)(u)){let p=window.getComputedStyle(u),h=parseInt(p.getPropertyValue("padding-left")),l=u.scrollWidth-h,U=u.querySelectorAll(".token.inserted-sign.inserted"),G=u.querySelectorAll(".token.deleted-sign.deleted"),R=u.querySelectorAll(".token.coord");for(let v of U)v.style.width=`${l}px`;for(let v of G)v.style.width=`${l}px`;for(let v of R)v.style.width=`${l}px`}};Prism.highlightElement(L,!1,M),T=!0}})})},f=n.querySelector("[data-file-path]:last-child .btn-show-hide"),j=!1;f.addEventListener("click",()=>{f.textContent.includes("Show")?f.textContent=f.textContent.replace("Show","Hide"):f.textContent=f.textContent.replace("Hide","Show"),!r&&!j&&(E(y),j=!0)}),r&&E(y)})}).catch(o=>{console.error(o.message)})),a=()=>{i.addEventListener("change",m=>{let o=m.target.value;o!=="default"&&w(o)})},t=e.classList.contains("show")||window.location.hash==`#${e.id}`,c=!1;t&&i.nodeName=="INPUT"?w(i.value):t&&i.nodeName=="SELECT"?a():e.addEventListener("show.bs.collapse",()=>{c||(i.nodeName==="INPUT"?w(i.value):a()),c=!0})}})()}});I()})();})();
